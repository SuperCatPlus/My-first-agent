# 修改语音工具实现，添加文本长度判断逻辑

## 目标
修改语音播报工具，使其能够根据文本长度自动决定是否发声：
- 当文本长度较短时（默认≤50字），主动发声
- 当文本长度较长时（默认>50字），不发声

## 修改步骤

### 1. 修改语音工具实现
- **文件**：`tools/implementations/voice_tools.py`
- **修改内容**：
  - 在`text_to_speech_edge_mixed`方法中添加`max_length`参数，默认值设为50
  - 添加文本长度判断逻辑：如果文本长度超过`max_length`，则直接返回成功结果，但不执行语音合成和播放
  - 更新方法的文档字符串，说明新参数的用途

### 2. 更新语音工具定义
- **文件**：`tools/definitions/voice_tools.json`
- **修改内容**：
  - 在工具定义中添加`max_length`参数的描述
  - 说明该参数用于指定触发发声的最大文本长度

### 3. 更新系统提示词
- **文件**：`prompts/system_prompt.yaml`
- **修改内容**：
  - 在语音工具的参数列表中添加`max_length`参数的说明
  - 说明默认值为50，当文本长度超过该值时不会发声

## 实现效果
修改后，当大模型生成的回复较短时（≤50字），会自动调用语音工具发声；当回复较长时（>50字），则不会发声，实现了用户期望的"字少就主动发声，字多就不发声"的效果。