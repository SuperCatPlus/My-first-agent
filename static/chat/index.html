<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ç²®åº“æ™ºèƒ½ä½“</title>
    <!-- <link rel="stylesheet" href="/css/xterm.min.css">
    <script src="/lib/xterm.min.js"></script> -->
    <link rel="stylesheet" href="css/index.css">
    <script src="/common/base.js">//src = "static\common\base.js"</script>
</head>
<body>

<div class="app-container" id="app">
    <div class="activity-bar">
        <div class="icon-btn active">ğŸ’¬</div>
        <div class="icon-btn">âš¡</div>
    </div>

    <div class="sub-panel" id="side-panel">
        <div style="padding: 24px; width: 280px;">
            <h3>è¿‘æœŸå¯¹è¯</h3>
            <p style="color:#666; font-size:14px">å¦‚ä½•è‡ªåŠ¨åŒ–éƒ¨ç½²é¡¹ç›®AA...</p>
        </div>
    </div>

    <div class="chat-area">
        <div class="icon-btn" style="position: absolute; top: 10px; left: 10px; z-index: 10;" onclick="togglePin()">ğŸ“Œ</div>
        <div class="chat-main">
            <div class="message-container">
                <div class="ai-msg">
                    ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„ AI åŠ©æ‰‹ã€‚æˆ‘å·²ç»ä¼˜åŒ–äº†å¸ƒå±€ï¼š<br><br>
                    â€¢ <b>æ— æŠ–åŠ¨æ‚¬æµ®</b>ï¼šå°è¯•é¼ æ ‡æ»‘è¿‡å·¦ä¾§å›¾æ ‡ã€‚<br>
                    â€¢ <b>ç®€çº¦é£æ ¼</b>ï¼šæ›´å¹²å‡€çš„å¯¹è¯æ’ç‰ˆå’Œèƒ¶å›Šè¾“å…¥æ¡†ã€‚<br>
                    â€¢ <b>ç»ˆç«¯/æ–‡æ¡£æ‹–æ‹½</b>ï¼šç‚¹å‡»å³ä¸‹è§’æ‰“å¼€é¢æ¿ï¼Œå°è¯•æ‹–åŠ¨å®ƒçš„å·¦è¾¹ç¼˜ï¼Œæ”¯æŒåˆ‡æ¢ç»ˆç«¯å’Œæ–‡æ¡£è§†å›¾ã€‚
                </div>
            </div>
        </div>
        <!-- è¾“å…¥ç›’å­ -->
        <div class="input-container">
            <div class="input-wrapper">
                <input type="text" class="chat-input" id="userInput" placeholder="å‘ Catto Bot  æé—®">
                <button id="sendBtn" style="border:none; background:none; cursor:pointer; color:var(--primary); font-weight:bold;">å‘é€</button>
            </div>
        </div>
    </div>

    <div class="resizer" id="resizer"></div>

    <!-- å³ä¾§é¢æ¿-->
    <div class="term-panel" id="term-panel">
        <!-- é€‰é¡¹æ¡† -->
        <div class="panel-tabs">
            <button class="tab-btn active" data-tab="terminal">
                ç»ˆç«¯
                <span class="tab-close">Ã—</span>
            </button>
            <button class="tab-btn" data-tab="document">
                AIæ–‡æ¡£
                <span class="tab-close">Ã—</span>
            </button>
        </div>
        <div class="panel-content">
            <!-- ç»ˆç«¯å†…å®¹ -->
            <div class="tab-content active" id="terminal-content">
                <!-- <div id="terminal-box"></div> -->
                <!-- <iframe src="http://172.16.37.208:3000" frameborder="0"></iframe> -->
                <!-- /shell/å°±æ˜¯static\shell\WebSHell.html -->
                <iframe class="iframe-web-terminal" src="/shell/" frameborder="0"></iframe>
            </div>
            <div class="tab-content" id="document-content">
                <div id="document-box">
                    <div class="document-content">
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <p>è¿™é‡Œä¼šæ˜¾ç¤º AI ç”Ÿæˆçš„æ–‡æ¡£å†…å®¹ã€‚</p>
                        <hr>
                        <h3>ç¤ºä¾‹æ–‡æ¡£</h3>
                        <p>è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ–‡æ¡£å†…å®¹ï¼Œä½ å¯ä»¥é€šè¿‡ JavaScript åŠ¨æ€æ›¿æ¢è¿™é‡Œçš„å†…å®¹ï¼Œæ”¯æŒ Markdown æ¸²æŸ“ï¼ˆéœ€å¼•å…¥ Markdown è§£æåº“ï¼‰ã€‚</p>
                        <ul>
                            <li>æ”¯æŒå¯Œæ–‡æœ¬æ ¼å¼</li>
                            <li>æ”¯æŒä»£ç å—é«˜äº®</li>
                            <li>æ”¯æŒå›¾ç‰‡å±•ç¤º</li>
                        </ul>
                        <pre><code>
// ç¤ºä¾‹ä»£ç å—
function renderAIDocument(content) {
    document.querySelector('.document-content').innerHTML = content;
}
                        </code></pre>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                        <h2>AI ç”Ÿæˆæ–‡æ¡£é¢„è§ˆ</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="fab" id="fab" onclick="toggleTerm(event)">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="4 17 10 11 4 5"></polyline>
        <line x1="12" y1="19" x2="20" y2="19"></line>
    </svg>
</div>

<script src="js/index.js"></script>
<!-- <script src="js/Message.js"></script> -->
<script>
// ç›‘å¬æ¥è‡ªiframeçš„æ¶ˆæ¯ï¼ˆWebSocketçŠ¶æ€å˜åŒ–ï¼‰
window.addEventListener('message', function(event) {
    // å®‰å…¨æ£€æŸ¥ï¼šç¡®ä¿æ¶ˆæ¯æ¥è‡ªåŒæº
    if (event.origin !== window.location.origin) {
        return;
    }
    
    if (event.data.type === 'websocket_connected') {
        console.log('æ”¶åˆ°WebSocketè¿æ¥é€šçŸ¥');
        
        // è®¾ç½®Cookieï¼šç»ˆç«¯å·²è¿æ¥
        document.cookie = 'terminal_connected=true; path=/';
        console.log('Cookieå·²è®¾ç½®: terminal_connected=true');
        
    } else if (event.data.type === 'websocket_disconnected') {
        console.log('æ”¶åˆ°WebSocketæ–­å¼€é€šçŸ¥');
        
        // è®¾ç½®Cookieï¼šç»ˆç«¯å·²æ–­å¼€
        document.cookie = 'terminal_connected=false; path=/';
        console.log('Cookieå·²è®¾ç½®: terminal_connected=false');
    }
});
</script>
</body>
</html>